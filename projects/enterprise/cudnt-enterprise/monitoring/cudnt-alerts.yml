groups:
  - name: cudnt-alerts
    rules:
    # High Error Rate
    - alert: CUDNTHighErrorRate
      expr: rate(cudnt_http_requests_total{status=~"5.."}[5m]) > 0.1
      for: 5m
      labels:
        severity: critical
        service: cudnt
      annotations:
        summary: "CUDNT high error rate detected"
        description: "Error rate is {{ $value }} errors per second"

    # Low prime aligned compute Level
    - alert: CUDNTLowConsciousnessLevel
      expr: cudnt_consciousness_level_avg < 5
      for: 10m
      labels:
        severity: warning
        service: cudnt
      annotations:
        summary: "CUDNT prime aligned compute level below optimal"
        description: "Average prime aligned compute level is {{ $value }}/12"

    # Performance Degradation
    - alert: CUDNTPerformanceDegradation
      expr: cudnt_optimization_speedup_avg < 100
      for: 15m
      labels:
        severity: warning
        service: cudnt
      annotations:
        summary: "CUDNT performance below expected levels"
        description: "Average speedup is {{ $value }}x (expected >100x)"

    # High Memory Usage
    - alert: CUDNTHighMemoryUsage
      expr: cudnt_memory_usage_percent > 85
      for: 10m
      labels:
        severity: warning
        service: cudnt
      annotations:
        summary: "CUDNT high memory usage"
        description: "Memory usage is {{ $value }}%"

    # Pod Restart
    - alert: CUDNTPodRestart
      expr: increase(kube_pod_container_status_restarts_total{pod=~"cudnt-.*"}[1h]) > 0
      for: 0m
      labels:
        severity: warning
        service: cudnt
      annotations:
        summary: "CUDNT pod restarted"
        description: "Pod {{ $labels.pod }} has restarted {{ $value }} times in the last hour"
